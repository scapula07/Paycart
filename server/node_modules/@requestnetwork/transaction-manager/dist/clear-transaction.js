"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const tslib_1 = require("tslib");
const multi_format_1 = require("@requestnetwork/multi-format");
const utils_1 = require("@requestnetwork/utils");
/**
 * Class representing a clear transaction
 */
class ClearTransaction {
    constructor(data) {
        this.data = data;
    }
    /**
     * Gets the data of the transaction
     *
     * @returns a promise resolving the transaction data
     */
    getData() {
        return tslib_1.__awaiter(this, void 0, void 0, function* () {
            return this.data;
        });
    }
    /**
     * Gets the transaction data hash
     *
     * @returns a promise resolving the transaction data hash
     */
    getHash() {
        return tslib_1.__awaiter(this, void 0, void 0, function* () {
            return multi_format_1.default.serialize((0, utils_1.normalizeKeccak256Hash)(JSON.parse(this.data)));
        });
    }
    /**
     * Gets the transaction error
     *
     * @returns a promise resolving a string of the error if any, otherwise an empty string
     */
    getError() {
        return tslib_1.__awaiter(this, void 0, void 0, function* () {
            try {
                JSON.parse(this.data);
                return '';
            }
            catch (e) {
                return 'Impossible to JSON parse the transaction';
            }
        });
    }
}
exports.default = ClearTransaction;
//# sourceMappingURL=clear-transaction.js.map